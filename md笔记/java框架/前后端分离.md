# 前后端分离

传统的 Java Web 开发中，前端使用 JSP 开发, JSP 不是由后端开发者独立完成。

前端---》HTML 静态页面---〉后端 ---》JSP

这种开发方式效率极低，可以使⽤前后端分离的方式进行开发，就可以完美地解决这⼀问题。

前端只需要独⽴编写客户端代码，后端也只需要独⽴编写服务端代码提供数据接⼝即可。

前端通过 Ajax 请求来访问后端的数据接口，将 Model 展示到 View 中即可。

前后端开发者只需要提前约定好接口文档（URL、参数、数据类型...），然后分别独立开发即可，前端可以造假数据进行测试，完全不需要依赖于后端，最后完成前后端集成即可，真正实现了前后端应用的解耦合，极⼤地提升了开发效率。

单体---》前端应用+ 后端应用

前端应用：负责数据展示和用户交互。

后端应用：负责提供数据处理接口。

前端 HTML ---》Ajax ---〉RESTful 后端数据接口。

传统单体应用：

![image-20200411094414867](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200411094414867.png)

前后端分离结构：

![image-20200411094453059](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200411094453059.png)

**实现技术**

Spring Boot + Vue



**跨域问题解决：**

```java
package com.dreamin.Config;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class CrosConfig implements WebMvcConfigurer {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOrigins("*")
                .allowCredentials(true)
                .allowedMethods("GET", "POST", "DELETE", "PUT","HEAD","OPTIONS")
                .maxAge(3600)
                .allowedHeaders("*");

    }
}
```

**前后端交互：**

注意：axios.get中的网址必须是带http的，否则系统会默认使用vue自带端口。

```html
<template>
    <div>
        <p>{{msg}}</p>
        <table>
            <tr>
                <th>id</th>
                <th>name</th>
                <th>status</th>
                <th>adress</th>
            </tr>
            <tr v-for="item in info">
                <td>{{item.id}}</td>
                <td>{{item.name}}</td>
                <td>{{item.auther}}</td>
                <td>{{Date.now()}}</td>
            </tr>
        </table>
    </div>
</template>

<script>
    export default {
        name: "book",
        data(){
            return{
                msg:"hello vue",
                info:""
            }
        },
        mounted() {
            axios.get("http://localhost:8080/findAll").then(response=>(this.info=response.data));
        }
    }
</script>

<style scoped>

</style>
```

**Vue集成Element UI**

el-container：构建整个页面框架。
el-aside：构建左侧菜单。
el-menu：左侧菜单内容，常用属性：
		:default-openeds：默认展开的菜单，通过菜单的 index 值来关联。
		:default-active：默认选中的菜单，通过菜单的 index 值来关联。
el-submenu：可展开的菜单，常用属性：
		index：菜单的下标，文本类型，不能是数值类型。
template：对应 el-submenu 的菜单名。
i：设置菜单图标，通过 class 属性实则。
		el-icon-message
		el-icon-menu
		el-icon-setting
el-menu-item：菜单的子节点，不可再展开，常用属性：
index：菜单的下标，文本类型，不能是数值类型。

展示窗口：

```html
<router-view></router-view>
```

axios不起作用解决步骤:

1、在main.js中添加：

```js
import axios from 'axios';
Vue.prototype.$axios = axios;
```

2、使用axios格式：

```js
this.$axios.get("http://localhost:8080/findPage/1/6").then(response => {
                this.tableData = response.data.list;
                this.pageSize= response.data.pageSize;
                this.total=response.total;
            });
```

**SpringBoot打包**